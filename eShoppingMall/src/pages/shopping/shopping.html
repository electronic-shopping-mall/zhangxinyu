<!--
  Generated template for the ShoppingPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header no-border>
    <!-- <ion-toolbar>  
        <ion-title class="my-title">购物车</ion-title>  
        <span class="qiehuan" (click)="edit()" *ngIf="head==1">编辑</span>
        <span class="qiehuan" (click)="finish()" *ngIf="head==2">完成</span>
    </ion-toolbar> -->
    <div class="headbk">
            <!-- <span class="backicon" (click)="goBack()">
              <i class="iconfont icon-back"></i>
            </span> -->
            <span class="title">购物车</span>
            <span class="qiehuan" (click)="edit()" *ngIf="head==1">编辑</span>
            <span class="qiehuan" (click)="finish()" *ngIf="head==2">完成</span>
    </div>

</ion-header>


<ion-content>
    <div [ngSwitch]='show'>
        <div *ngSwitchCase='1'>
            <div id="out">
                <div id="kong">
                    <img src="../assets/imgs/空购物车.png" alt="">
                    <span>购物车空空如也~</span>
                </div>
                <button (click)="goHome()">去逛逛</button>
            </div>
        </div>
        <div *ngSwitchCase='2'>
            <ul>
                <li *ngFor="let item of cartData;let i=index" >
                    <div class="checkbox">
                        <ion-checkbox color="primary" checked="{{flag[i]}}" (click)="choose(item.cartID,i)"></ion-checkbox>
                    </div>
                    <div class="img" (click)="goGoods(item.productID)">
                        <img src="{{item.images.split('|')[0]}}" alt="">
                    </div>
                    <div class="text">
                        <span class="title">{{item.title}}</span>
                        <span class="type">{{item.type}}</span>
                        <span class="price">￥ {{item.price}}</span>
                        <span class="btn">
                            <div id="drop" (click)="drop(i)" [class.jinyong]="item.amount==1">-</div>
                            <div id="num">{{item.amount}}</div>
                            <div id="add" (click)="add(i)">+</div>
                        </span>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</ion-content>
<ion-footer no-border>
    <div [ngSwitch]='foot'  *ngIf="show==2">
        <div *ngSwitchCase='1' class="div1">
            <div class="one">
                <ion-checkbox color="primary" checked="{{idArray.length==cartData.length}}" (click)="allChoose()">全选</ion-checkbox>
            </div>
            <div class="two">
                全选
            </div>
            <div class="three">
                合计：￥ {{totalPrice}}
            </div>
            <div id="jiesuan" (click)="pay()" [class.notclick]="totalNum==0" [style.background]="totalNum==0?'#bbbbbb':'#80c9c4'">
                结算（{{totalNum}}）
            </div>
            <div class="five"></div>
        </div>
        <div *ngSwitchCase='2' class="div1">
            <div class="one">
                <ion-checkbox color="primary" checked="{{idArray.length==cartData.length}}" (click)="allChoose()">全选</ion-checkbox>
            </div>
            <div class="two">
                全选
            </div>
            <div class="three">
            </div>
            <div class="four">
                    <button id="delete" (click)="delete()">删除所选</button>
            </div>
            <div class="five"></div>
        </div>
    </div>
</ion-footer>
